loadScript(plugin_path+"datatables/js/jquery.dataTables.min.js",function(){loadScript(plugin_path+"datatables/dataTables.bootstrap.js",function(){$("#data_table").DataTable({lengthMenu:[5,10,25,50,75,100,250,500],dom:"lfrtip",buttons:[{extend:"copy",text:"Copiar"},{extend:"csvHtml5",text:"Exportar CSV",exportOptions:{columns:":not(:last-child)",modifier:{search:"none"}}},{extend:"pdf",text:"Exportar PDF"}],pageLength:10,responsive:!0,columnDefs:[{orderable:!1,targets:-1}],language:{info:"Mostrando página _PAGE_ de _PAGES_",infoEmpty:"Sem resultados",infoFiltered:" - Filtrado de _MAX_ ",zeroRecords:"Sem resultados",lengthMenu:"Exibir _MENU_ ",search:"Pesquisar :",paginate:{first:"«",previous:"‹",next:"›",last:"»"},aria:{paginate:{first:"Primeiro",previous:"Anterior",next:"Próximo",last:"Último"}},buttons:{copyTitle:"Copia realizada",copySuccess:{1:"Copiado 1 linha para o",_:"Copiado %d linhas para o clipboard"}}}})})}),loadScript(plugin_path+"bootstrap.typeahead/bootstrap3-typeahead.min.js",function(){!function(){function t(t){$.getJSON(url_default+"util/get_business").then(function(a){t.typeahead({source:a})})}function a(t){$.getJSON(url_default+"util/have_business_neighborhood_request",{business:t}).then(function(t){""!=t&&null!=t&&void 0!=t?($(".form-link-warning").show(),$(".form-input").hide(),$("#link-support").attr("href",url_default+"admin/pedidos/detalhes/"+t),$("#pedir").attr("disabled",!0)):($(".form-link-warning").hide(),$(".form-input").show(),$("#link-support").attr("href",""),$("#pedir").attr("disabled",!1))})}if($("#business")[0]){var e=$("#business");t(e),e.on("blur",function(){var t=$(this).val();$(".form-link-warning")[0]&&a(t)})}$(".form-link-warning")[0]&&$(".form-link-warning").hide(),$(".form-notfind-business")[0]&&$(".form-notfind-business").hide()}()}),loadScript(plugin_path+"chart.chartjs/Chart.min.js",function(){!function(){function t(){var t=$("#ctx-pie-state").get(0).getContext("2d"),a=$("#ctx-doughnut-citys").get(0).getContext("2d"),e=$("#ctx-bar-type-business").get(0).getContext("2d"),o=[],n=[],i={labels:[],datasets:[{label:"Negócios mais Pedidos",fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,0.8)",highlightFill:"rgba(151,187,205,0.75)",highlightStroke:"rgba(151,187,205,1)",data:[]}]},r=Math.floor(9*Math.random()),s=Math.floor(9*Math.random()),l=Math.floor(9*Math.random());$.getJSON(url_default+"admin/painel/get_charts").then(function(d){""!=d&&"0"!=d&&null!=d&&void 0!=d&&($("#graphs").show(),$.each(d.states,function(t,a){o.push({value:a.quantity,label:a.state,color:"#"+r+s+"DA"+l+"D",highlight:"#"+Math.floor(9*Math.random())+Math.floor(9*Math.random())+"AD"+Math.floor(9*Math.random())+"D1"})}),$.each(d.citys,function(t,a){n.push({value:a.quantity,label:a.city,color:"#"+Math.floor(9*Math.random())+Math.floor(9*Math.random())+"BF"+Math.floor(9*Math.random())+"D",highlight:"#"+Math.floor(9*Math.random())+Math.floor(9*Math.random())+"AD"+Math.floor(9*Math.random())+"D1"})}),$.each(d.type_business,function(t,a){i.labels.push(a.type_business),i.datasets[0].data.push(a.quantity)}),new Chart(e).Bar(i,{animation:!0,responsive:!0}),new Chart(t).Pie(o,{animation:!0,responsive:!0}),new Chart(a).Doughnut(n,{animation:!0,responsive:!0}))})}$("#graphs").length>0&&($("#graphs").hide(),t())}()}),function(t){t(function(){function a(a,e){var o=t(e),n="";t.getJSON(url_default+"util/get_address",{zip_code:a}).done(function(a){n=a.state+" - "+a.city+" - "+a.neighborhood+" - "+a.street,o.find(".alert").removeClass("alert-warning").addClass("alert-info").html(n),o.show(),t("#id-address").removeClass("error"),t("#cpf").hasClass("error")||t("#submit").attr("disabled",!1)}).fail(function(){n="Cep não econtrado.",o.find(".alert").removeClass("alert-info").addClass("alert-warning").html(n),o.show(),t("#id-address").addClass("error"),t("#submit").attr("disabled",!0)})}t(".form-address").hasClass("filled")?t(".form-address").show():t(".form-address").hide(),t("#id-address").on("blur",function(){var e=t(this).val();""!=e&&"XXXXXXXX"!=e&&null!=e&&void 0!=e?a(e,".form-address"):(t(this).addClass("error"),t(".form-address").find(".alert").addClass("alert-warning").html("CEP não encontrado"),t(".form-address").show(),t("#submit").attr("disabled",!0))})})}(jQuery,window,document),function(t,a){t(function(){function e(a){""!=a&&null!=a&&void 0!=a&&a>1?(t(".uploadfiles").show(),t("#files").attr("required",!0)):(t(".uploadfiles").hide(),t("#files").attr("required",!1))}t("#request-support").on("click",function(){var e=t(this).attr("data-id");confirm("Deseja apoiar esta solicitação ?")&&t.post(url_default+"admin/pedidos/apoiar",{request:e}).then(function(t){""!=t&&"0"!=t&&null!=t&&void 0!=t?(a.alert("Operação realizada com sucesso."),a.location=a.location.href+"/3"):a.alert("Erro ao realizar operação.")},"json")}),t(".uploadfiles").hide(),t("#quantity").on({blur:function(){e(t(this).val())},change:function(){e(t(this).val())},keyup:function(){e(t(this).val())}})})}(jQuery,window,document),function(t,a){t(function(){function e(e){t.post(e+"remover",{selecteds:n}).then(function(t){""!=t&&null!=t&&void 0!=t&&(a.alert(t+" registro(s) excluido(s) com sucesso."),a.location.reload(!0))},"json")}function o(e){t.post(e+"feito",{selecteds:n}).then(function(t){""!=t&&null!=t&&void 0!=t&&(a.alert(t+" registro(s) atualizado(s) com sucesso."),a.location.reload(!0))},"json")}var n=[];t(".btn-update")[0]&&t(".btn-update").on("click",function(t){t.stopPropagation()}),t(".data-item")[0]&&t(".data-item").on("click",function(){var a=t(this).attr("data-id"),e=n.indexOf(a);-1==e?(n.push(a),t(this).addClass("success")):(n.splice(e,1),t(this).removeClass("success"))}),t("#btn-delete")[0]&&t("#btn-delete").on("click",function(t){t.preventDefault(),n.length>0?confirm("Deseja excluir este(s) registro(s)?")&&e(a.page_action):a.alert("Nenhum registro selecionado.")}),t("#btn-done")[0]&&t("#btn-done").on("click",function(t){t.preventDefault(),n.length>0?confirm("Deseja marcar como Concluido este(s) registro(s)?")&&o(a.page_action):a.alert("Nenhum registro selecionado.")})})}(jQuery,window,document);